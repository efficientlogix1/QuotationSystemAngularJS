@{
    ViewBag.Title = "Request Setup";
}
<script src="~/Angular/OrderRequest/RequesterRequestSetup.js"></script>
<form ng-controller="RequestController" name="RequestForm" ng-submit="SubmitForm()">
    <div class="row">
        <div class="form-group col-sm-6">
            <input class="form-control inputtxt" type="text" placeholder="Request Title" ng-model="request.Title" required ng-show="request.isEdit == true" />
            <h3 ng-show="request.isEdit == false">Title: {{request.Title}}</h3>
        </div>
    </div>
    <div ng-show="request.isEdit == true" class="row" ng-repeat="x in request.ProductRequests track by $index">
        <div class="form-group col-sm-6">
            <select class="form-control inputddl catDDl" id="catDdl_{{$index}}" ng-model="x.CategoryID" onchange="angular.element(this).scope().ChangeCategory(this)" @*ng-change="ChangeCategory(x.CategoryID)"*@>
                <option ng-value="0">select category</option>
                <option ng-repeat="c in lstCategories" ng-value="{{c.ID}}">{{c.Name}}</option>
            </select>
        </div>
        <div class="form-group col-sm-6">
            <select id="productDdl_{{$index}}" class="form-control inputddl" ng-model="x.ProductID">
                <option ng-value="0">select product</option>
            </select>
        </div>

        <div class="col-sm-6 btnDiv" style="margin-bottom: 20px;">
            <a class="btn btn-success" ng-click="AddDiv()">
                <span class="fa fa-plus"></span>
            </a>
            &nbsp;<a ng-show="$index != 0" class="btn btn-danger" ng-click="RemoveDiv($index)"><span class="fa fa-times"></span></a>
        </div>

    </div>
    <div class="row" ng-show="request.isEdit == false">
        <div ng-repeat="x in request.ProductRequests track by $index">

            <div class="form-group col-sm-6">
                <h4>{{$index+1}}. Category:</h4><h5> {{x.CategoryName}}</h5>
            </div>
            <div class="form-group col-sm-6">
                <h4>Product:</h4><h5> {{x.ProductName}}</h5>
            </div>
        </div>
    </div>
    <div class="row">
        <div ng-show="request.isEdit == false">
            <div class="form-group col-sm-6">
                <h4>Buyer's Qoutation:</h4> <b>{{request.BuyerPrice}}</b>
            </div>
            <div class="form-group col-sm-6">
                <h4>Buyer Description:</h4> <p>{{request.BuyerDescription}}</p>
            </div>
        </div>
    </div>
    <div class="row" ng-show="request.isEdit == true">
        <div class="form-group col-sm-6">
            <label for="form-field-select-4">
                Select Buyers
            </label>
            <select multiple="multiple" id="Buyers" class="form-control search-select" ng-model="request.lstSelectedBuyers" required>
                <option ng-value="{{b.Id}}" ng-repeat="b in lstBuyers">{{b.Name}}</option>
            </select>
        </div>
        <div class="form-group col-sm-6">
            <label for="form-field-select-4">
                Select Action
            </label>
            <select class="form-control inputddl" ng-model="request.ActionID" required>
                <option ng-value="0">Select Action</option>
                <option ng-repeat="a in lstActions" ng-value="{{a.ID}}">{{a.Name}}</option>
            </select>
        </div>
    </div>
    <div class="row" ng-show="request.isEdit == false">
        <div class="form-group col-sm-6">
            <label for="form-field-select-4">
                Select Buyers
            </label>
            <select multiple="multiple" id="SavedBuyers" class="form-control search-select" ng-model="request.lstSelectedBuyers" disabled>
                <option ng-value="{{b.Id}}" ng-repeat="b in lstBuyers">{{b.Name}}</option>
            </select>
        </div>
        <div class="form-group col-sm-6">
            <label for="form-field-select-4">
                Select Action
            </label>
            <select class="form-control inputddl" ng-model="request.ActionID" disabled>
                <option ng-value="0">Select Action</option>
                <option ng-repeat="a in lstActions" ng-value="{{a.ID}}">{{a.Name}}</option>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="form-actions col-sm-6" style="text-align:right">
            <a href="/OrderRequest/RequesterRequestList" class="btn btn-light-grey go-back">
                <i class="fa fa-circle-arrow-left"></i> Back
            </a>&nbsp;
            <a href="/" class="btn btn-info go-back">
                <i class="fa fa-circle-arrow-left"></i> Cancel
            </a>&nbsp;
            <button type="submit" class="btn btn-purple" ng-show="request.isEdit == true">
                Submit <i class="fa fa-arrow-circle-right"></i>
            </button>
            &nbsp;
            <button class="btn btn-info" onclick="PrintElem('printElement')" ng-show="request.ID != 0">
                Print
            </button>
        </div>
    </div>
    <div id="printElement" style="display:none;">
        <h3>Title: {{request.Title}}</h3>
        <hr />
        <h3>Buyer: {{request.BuyerName}}</h3>
        <div class="row">
            <div ng-repeat="x in request.ProductRequests track by $index">

                <div class="form-group col-sm-6">
                    <h4>{{$index+1}}. Category:</h4><h5> {{x.CategoryName}}</h5>
                </div>
                <div class="form-group col-sm-6">
                    <h4>Product:</h4><h5> {{x.ProductName}}</h5>
                </div>
            </div>
        </div>
        <div class="form-group col-sm-6">
            <h4>Buyer's Qoutation:</h4> <b>{{request.BuyerPrice}}</b>

        </div>
        <div class="form-group col-sm-6">
            <h4>Buyer Description:</h4> <p>{{request.BuyerDescription}}</p>
        </div>
    </div>
</form>

