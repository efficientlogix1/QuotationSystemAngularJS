
@{
    ViewBag.Title = "Request Setup";
}
<script src="~/Angular/OrderRequest/RequestSetup.js"></script>
@*<h4>
        Reuest details below:
    </h4>*@
@if (User.IsInRole("Vendor") || User.IsInRole("Admin") || User.IsInRole("Buyer"))
{
    <h3>Title: {{request.Title}}</h3>

    <hr />
}
<form ng-controller="RequestController" name="RequestForm" ng-submit="SubmitForm()">
    @if (User.IsInRole("Requester"))
    {
        <div class="row">
            <div class="form-group col-sm-6">
                <input class="form-control inputtxt" type="text" placeholder="Request Title" ng-model="request.Title" required />
            </div>
        </div>
        <div class="row" ng-repeat="x in request.ProductRequests track by $index">
            <div class="form-group col-sm-6">
                <select class="form-control inputddl catDDl" id="catDdl_{{$index}}" ng-model="x.CategoryID" onchange="angular.element(this).scope().ChangeCategory(this)" @*ng-change="ChangeCategory(x.CategoryID)"*@>
                    <option ng-value="0">select category</option>
                    <option ng-repeat="c in lstCategories" ng-value="{{c.ID}}">{{c.Name}}</option>
                </select>
            </div>
            <div class="form-group col-sm-6">
                <select id="productDdl_{{$index}}" class="form-control inputddl" ng-model="x.ProductID">
                    <option ng-value="0">select product</option>
                    @*<option ng-repeat="p in lstProductsDDl" ng-value="{{p.ID}}">{{p.Name}}</option>*@

                </select>
            </div>

            <div class="col-sm-6 btnDiv" style="margin-bottom: 20px;">
                <a class="btn btn-success" ng-click="AddDiv()">
                    <span class="fa fa-plus"></span>
                </a>
                &nbsp;<a ng-show="$index != 0" class="btn btn-danger" ng-click="RemoveDiv($index)"><span class="fa fa-times"></span></a>
            </div>

        </div>
        <div class="row">
            <div ng-show="request.ID != 0">

                <div class="form-group col-sm-6">
                    <h4>Qoutation 1:</h4> {{request.Qoutation1}}

                </div>
                <div class="form-group col-sm-6">
                    <h4>Qoutation 2:</h4> {{request.Qoutation2}}

                </div>
                <div class="form-group col-sm-6">
                    <h4>Qoutation 3:</h4> {{request.Qoutation3}}

                </div>
                <div class="form-group col-sm-6">
                    <h4>Vendor's Description:</h4> <p>{{request.VendorDescription}}</p>
                </div>
                <div class="form-group col-sm-6">
                    <h4>Vendor's Comments:</h4> <p>{{request.Comment}}</p>
                </div>
            </div>
            <div class="form-group col-sm-6">
                <textarea class="form-control inputtxt" placeholder="Description" ng-model="request.BuyerDescription" style="resize:none;"></textarea>
            </div>
        </div>
    }

    @if (User.IsInRole("Vendor") || User.IsInRole("Admin") || User.IsInRole("Requester"))
    {
        <div class="row">
            <div ng-repeat="x in request.ProductRequests track by $index">
                <div class="form-group col-sm-6">
                    <h4>{{$index+1}}. Category:</h4><h5> {{x.CategoryName}}</h5>
                </div>
                <div class="form-group col-sm-6">
                    <h4>Product:</h4><h5> {{x.ProductName}}</h5>
                </div>
            </div>
            <div class="form-group col-sm-6">
                <h4>Buyer Description:</h4> <p>{{request.BuyerDescription}}</p>
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <input class="form-control inputtxt" type="text" placeholder="Qoutation1" ng-model="request.Qoutation1" required />
            </div>
            <div class="form-group col-sm-6">
                <input class="form-control inputtxt" type="text" placeholder="Qoutation2" ng-model="request.Qoutation2" required />
            </div>
            <div class="form-group col-sm-6">
                <input class="form-control inputtxt" type="text" placeholder="Qoutation3" ng-model="request.Qoutation3" required />
            </div>
        </div>
        <div class="row">
            <div class="form-group col-sm-6">
                <textarea class="form-control inputtxt" ng-model="request.VendorDescription" placeholder="Description" style="resize:none;"></textarea>
            </div>
            <div class="form-group col-sm-6">
                <textarea class="form-control inputtxt" ng-model="request.Comment" placeholder="Coments" style="resize:none;"></textarea>
            </div>

        </div>
    }

    <div class="row">
        @if (User.IsInRole("Requester"))
        {
            <div class="form-group col-sm-6">
                <label for="form-field-select-4">
                    Select Buyers
                </label>
                <select multiple="multiple" id="Vendors" class="form-control search-select" ng-model="request.lstSelectedVendors" required>
                    <option ng-value="{{b.Id}}" ng-repeat="b in lstBuyers">{{b.Name}}</option>
                </select>
            </div>
            <div class="form-group col-sm-6">
                <label for="form-field-select-4">
                    Select Action
                </label>
                <select class="form-control inputddl" ng-model="request.ActionID" required>
                    <option ng-value="0">Select Action</option>
                    <option ng-repeat="a in lstActions" ng-value="{{a.ID}}">{{a.Name}}</option>
                </select>
            </div>
        }
        @if (User.IsInRole("Buyer"))
        {
            <div class="form-group col-sm-6">
                <label for="form-field-select-4">
                    Select Vendors
                </label>
                <select multiple="multiple" id="Vendors" class="form-control search-select" ng-model="request.lstSelectedVendors" required>
                    <option ng-value="{{b.Id}}" ng-repeat="b in lstVendors">{{b.Name}}</option>
                </select>
            </div>
        }
        @if (User.IsInRole("Vendor") || User.IsInRole("Admin") || User.IsInRole("Requester"))
        {
            <div class="form-group col-sm-6">
                <select class="form-control inputddl" id="requestStatusDdl" ng-model="request.StatusID" required>
                    <option ng-value="0">Select Status</option>
                    <option ng-repeat="s in lstStatus" ng-value="{{s.ID}}">{{s.Name}}</option>
                </select>
            </div>
        }

    </div>


    <div class="row">
        <div class="form-actions col-sm-6" style="text-align:right">
            <a href="/OrderRequest/RequestSetup" class="btn btn-light-grey go-back">
                <i class="fa fa-circle-arrow-left"></i> Back
            </a>&nbsp;
            <a href="/" class="btn btn-info go-back">
                <i class="fa fa-circle-arrow-left"></i> Cancel
            </a>&nbsp;
            <button type="submit" class="btn btn-purple">
                Submit <i class="fa fa-arrow-circle-right"></i>
            </button>
        </div>
    </div>
</form>